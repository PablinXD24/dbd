<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precision Barbers | Minimal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="liquid-background">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <nav class="navbar glass">
        <div class="container nav-content">
            <div class="logo">
                <i class="fas fa-cut"></i>
                <span>PRECISION</span>
            </div>
            
            <div class="nav-links">
                <a href="#" data-page="home" class="active">Início</a>
                <a href="#" data-page="agendar">Agendar</a>
                <a href="#" data-page="meus-agendamentos">Meus Horários</a>
                <a href="#" data-page="admin" class="admin-link hidden">
                    <i class="fas fa-lock"></i> Gestão
                </a>
            </div>

            <div class="user-actions">
                <button id="login-btn" class="btn-primary">Entrar</button>
                <div id="user-menu" class="hidden">
                    <span id="user-name-display">Cliente</span>
                    <button id="logout-btn"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section id="home-page" class="page active">
            <div class="container hero">
                <div class="hero-content">
                    <h1>Estilo sem <span class="highlight">caos.</span></h1>
                    <p>Agendamento simplificado para homens que valorizam seu tempo.</p>
                    <div class="hero-buttons">
                        <button class="btn-primary big" onclick="navigateTo('agendar')">
                            Agendar Corte <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                <div class="hero-card glass">
                    <div class="stat">
                        <strong id="barber-count">0</strong>
                        <span>Profissionais Disponíveis</span>
                    </div>
                    <div class="stat">
                        <strong>4.9</strong>
                        <span>Avaliação Média</span>
                    </div>
                </div>
            </div>
            
            <div class="container services-preview">
                <h2>Nossos Serviços</h2>
                <div id="services-list" class="grid-simple"></div>
            </div>
        </section>

        <section id="agendar-page" class="page">
            <div class="container">
                <div class="wizard-container glass">
                    <div class="wizard-header">
                        <h2 id="wizard-title">Selecione o Serviço</h2>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>

                    <div id="step-1" class="step active">
                        <div id="booking-services" class="grid-selection"></div>
                    </div>

                    <div id="step-2" class="step">
                        <div class="step-top">
                            <button class="btn-text prev-step" data-prev="1">Voltar</button>
                            <h3>Escolha o Profissional</h3>
                        </div>
                        <div id="booking-barbers" class="grid-selection"></div>
                    </div>

                    <div id="step-3" class="step">
                        <div class="step-top">
                            <button class="btn-text prev-step" data-prev="2">Voltar</button>
                            <h3>Data e Horário</h3>
                        </div>
                        <div class="datetime-wrapper">
                            <div class="calendar-simple">
                                <div class="cal-header">
                                    <button id="prev-month">&lt;</button>
                                    <span id="current-month-display">Mês</span>
                                    <button id="next-month">&gt;</button>
                                </div>
                                <div id="calendar-grid" class="cal-grid"></div>
                            </div>
                            <div class="time-simple">
                                <p>Horários para <b id="selected-date-text">...</b></p>
                                <div id="time-slots" class="slots-grid"></div>
                            </div>
                        </div>
                    </div>

                    <div id="step-4" class="step">
                        <div class="step-top">
                            <button class="btn-text prev-step" data-prev="3">Voltar</button>
                            <h3>Confirmar</h3>
                        </div>
                        <div class="summary-box">
                            <div class="summary-row">
                                <span>Serviço</span>
                                <strong id="sum-service">-</strong>
                            </div>
                            <div class="summary-row">
                                <span>Profissional</span>
                                <strong id="sum-barber">-</strong>
                            </div>
                            <div class="summary-row">
                                <span>Quando</span>
                                <strong id="sum-date">-</strong>
                            </div>
                            <div class="summary-total">
                                <span>Total</span>
                                <strong id="sum-price">R$ 0,00</strong>
                            </div>
                            <button id="confirm-booking-btn" class="btn-primary full">Confirmar Agendamento</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="meus-agendamentos-page" class="page">
            <div class="container">
                <h2>Meus Agendamentos</h2>
                <div class="glass appointments-box">
                    <div id="user-appointments-list" class="list-clean">
                        <p class="empty-msg">Carregando...</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="admin-page" class="page">
            <div class="container-fluid"> <div class="admin-layout">
                    <div class="admin-sidebar glass">
                        <div class="admin-profile">
                            <div class="avatar">A</div>
                            <span>Super Admin</span>
                        </div>
                        <button class="admin-nav active" data-tab="dash">Dashboard</button>
                        <button class="admin-nav" data-tab="agendamentos">Agendamentos</button>
                        <button class="admin-nav" data-tab="servicos">Serviços</button>
                        <button class="admin-nav" data-tab="barbeiros">Profissionais</button>
                    </div>

                    <div class="admin-content glass">
                        <div id="admin-dash" class="admin-view active">
                            <h3>Visão Geral</h3>
                            <div class="kpi-grid">
                                <div class="kpi-card">
                                    <span>Hoje</span>
                                    <strong id="kpi-today">0</strong>
                                </div>
                                <div class="kpi-card">
                                    <span>Receita (Mês)</span>
                                    <strong id="kpi-revenue">R$ 0</strong>
                                </div>
                                <div class="kpi-card">
                                    <span>Total Clientes</span>
                                    <strong id="kpi-users">0</strong>
                                </div>
                            </div>
                        </div>

                        <div id="admin-agendamentos" class="admin-view">
                            <h3>Gestão de Agenda</h3>
                            <div class="table-wrapper">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Data</th>
                                            <th>Hora</th>
                                            <th>Cliente</th>
                                            <th>Serviço</th>
                                            <th>Profissional</th>
                                            <th>Status</th>
                                            <th>Ação</th>
                                        </tr>
                                    </thead>
                                    <tbody id="admin-appointments-table"></tbody>
                                </table>
                            </div>
                        </div>

                        <div id="admin-servicos" class="admin-view">
                            <div class="view-header">
                                <h3>Catálogo de Serviços</h3>
                                <button class="btn-primary small" onclick="openModal('service-modal')">+ Novo</button>
                            </div>
                            <div id="admin-services-grid" class="grid-cards-admin"></div>
                        </div>

                        <div id="admin-barbeiros" class="admin-view">
                            <div class="view-header">
                                <h3>Equipe</h3>
                                <button class="btn-primary small" onclick="openModal('barber-modal')">+ Novo</button>
                            </div>
                            <div id="admin-barbers-grid" class="grid-cards-admin"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="login-modal" class="modal-overlay hidden">
        <div class="modal glass">
            <button class="close-modal">&times;</button>
            <h3>Acesso</h3>
            <form id="auth-form">
                <input type="email" id="email" placeholder="E-mail" required>
                <input type="password" id="password" placeholder="Senha" required>
                <button type="submit" class="btn-primary full">Entrar / Cadastrar</button>
                <p class="modal-hint">Se não tiver conta, ela será criada automaticamente.</p>
            </form>
        </div>
    </div>

    <div id="service-modal" class="modal-overlay hidden">
        <div class="modal glass">
            <button class="close-modal">&times;</button>
            <h3>Serviço</h3>
            <form id="admin-service-form">
                <input type="hidden" id="service-id">
                <label>Nome</label>
                <input type="text" id="service-name" required>
                <label>Preço (R$)</label>
                <input type="number" id="service-price" step="0.01" required>
                <label>Duração (min)</label>
                <input type="number" id="service-duration" required>
                <button type="submit" class="btn-primary full">Salvar</button>
            </form>
        </div>
    </div>

    <div id="barber-modal" class="modal-overlay hidden">
        <div class="modal glass">
            <button class="close-modal">&times;</button>
            <h3>Profissional</h3>
            <form id="admin-barber-form">
                <input type="hidden" id="barber-id">
                <label>Nome</label>
                <input type="text" id="barber-name" required>
                <label>Especialidade</label>
                <input type="text" id="barber-specialty" placeholder="Ex: Barba, Corte Moderno">
                <button type="submit" class="btn-primary full">Salvar</button>
            </form>
        </div>
    </div>

    <div id="notification" class="hidden">Mensagem aqui</div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="app.js"></script>
</body>
</html>
